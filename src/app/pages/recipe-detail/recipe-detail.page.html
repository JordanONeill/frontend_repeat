<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ recipe?.strMeal || 'Recipe Detail' }}</ion-title>

    <!-- Quick link to favorites -->
    <ion-buttons slot="end">
      <ion-button routerLink="/favorites">Favorites</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Guard against null recipe with *ngIf and fallback template -->
<ion-content class="ion-padding" *ngIf="recipe; else loadingOrError">
  <!-- Main hero image -->
  <img class="recipe-hero" [src]="recipe.strMealThumb" alt="{{ recipe.strMeal }}" />

  <h2 class="title">{{ recipe.strMeal }}</h2>
  <p class="meta">
    <strong>Category:</strong> {{ recipe.strCategory }} &nbsp;â€¢&nbsp;
    <strong>Area:</strong> {{ recipe.strArea }}
  </p>

  <ion-button expand="block" color="secondary" (click)="addToFavourites()">Add to Favourites</ion-button>

  <!-- Ingredients list -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Ingredients</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let item of getIngredients()">
          <ion-label>{{ item }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Instructions section -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Instructions</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p class="instructions">{{ recipe.strInstructions }}</p>
    </ion-card-content>
  </ion-card>
</ion-content>

<ng-template #loadingOrError>
  <ion-content class="ion-padding">
    <ion-text *ngIf="!errorMsg" color="medium">
      <p>Loading recipe...</p>
    </ion-text>
    <ion-text *ngIf="errorMsg" color="danger">
      <p>{{ errorMsg }}</p>
    </ion-text>
  </ion-content>
</ng-template>
